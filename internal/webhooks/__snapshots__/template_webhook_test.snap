['Template webhook when creating template without urlbase should pass with defaulting urlbase 1']
SnapShot = """
{
  \"kind\": \"Template\",
  \"apiVersion\": \"cosmo-workspace.github.io/v1alpha1\",
  \"metadata\": {
    \"name\": \"code-server-test-wh\",
    \"creationTimestamp\": null,
    \"labels\": {
      \"cosmo-workspace.github.io/type\": \"workspace\"
    },
    \"annotations\": {
      \"workspace.cosmo-workspace.github.io/deployment\": \"ws-dep\",
      \"workspace.cosmo-workspace.github.io/service\": \"ws-svc\",
      \"workspace.cosmo-workspace.github.io/service-main-port\": \"mainPort\",
      \"workspace.cosmo-workspace.github.io/urlbase\": \"https://{{NETRULE_GROUP}}-{{INSTANCE}}-{{USER_NAME}}.domain\"
    }
  },
  \"spec\": {
    \"requiredVars\": [
      {
        \"var\": \"{{DOMAIN}}\"
      },
      {
        \"var\": \"{{IMAGE_TAG}}\",
        \"default\": \"latest\"
      }
    ],
    \"rawYaml\": \"apiVersion: networking.k8s.io/v1\\nkind: Ingress\\nmetadata:\\n  labels:\\n    cosmo-workspace.github.io/template: '{{INSTANCE}}'\\n    cosmo-workspace.github.io/template: code-server-test\\n  name: ws-ing\\n  namespace: '{{NAMESPACE}}'\\nspec:\\n  rules:\\n  - host: 'main-{{INSTANCE}}-{{NAMESPACE}}.{{DOMAIN}}'\\n    http:\\n      paths:\\n      - path: /\\n        pathType: Prefix\\n        backend:\\n          service:\\n            name: ws-svc\\n            port: \\n              number: 8080\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  labels:\\n    cosmo-workspace.github.io/template: '{{INSTANCE}}'\\n    cosmo-workspace.github.io/template: code-server-test\\n  name: ws-svc\\n  namespace: '{{NAMESPACE}}'\\nspec:\\n  ports:\\n  - name: main\\n    port: 8080\\n    protocol: TCP\\n  selector:\\n    cosmo-workspace.github.io/template: '{{INSTANCE}}'\\n    cosmo-workspace.github.io/template: code-server-test\\n  type: ClusterIP\\n---\\napiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  labels:\\n    cosmo-workspace.github.io/template: '{{INSTANCE}}'\\n    cosmo-workspace.github.io/template: code-server-test\\n  name: ws-dep\\n  namespace: '{{NAMESPACE}}'\\nspec:\\n  replicas: 1\\n  selector:\\n    matchLabels:\\n      cosmo-workspace.github.io/template: '{{INSTANCE}}'\\n      cosmo-workspace.github.io/template: code-server-test\\n  template:\\n    metadata:\\n      labels:\\n        cosmo-workspace.github.io/template: '{{INSTANCE}}'\\n        cosmo-workspace.github.io/template: code-server-test\\n    spec:\\n      containers:\\n      - image: 'code-server:{{IMAGE_TAG}}'\\n        name: code-server-test\\n        ports:\\n        - containerPort: 8080\\n          name: main\\n          protocol: TCP\\n\"
  }
}
"""

['Template webhook when including ClusterRole in Template should pass with warning even though invalid scope 1']
SnapShot = """
{
  \"kind\": \"Template\",
  \"apiVersion\": \"cosmo-workspace.github.io/v1alpha1\",
  \"metadata\": {
    \"name\": \"cluster-level-tmpl\",
    \"creationTimestamp\": null
  },
  \"spec\": {
    \"rawYaml\": \"apiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRole\\nmetadata:\\n  name: privileged\\n  namespace: {{NAMESPACE}}\\nrules:\\n- apiGroups:\\n  - '*'\\n  resources:\\n  - '*'\\n  verbs:\\n  - '*'\\n- nonResourceURLs:\\n  - '*'\\n  verbs:\\n  - '*'\\n\"
  }
}
"""

['Template webhook when including ClusterRole in Template with skip validation annotation should pass with warning even though invalid scope 1']
SnapShot = """
{
  \"kind\": \"Template\",
  \"apiVersion\": \"cosmo-workspace.github.io/v1alpha1\",
  \"metadata\": {
    \"name\": \"cluster-level-tmpl-passed\",
    \"creationTimestamp\": null,
    \"annotations\": {
      \"cosmo-workspace.github.io/skip-validation\": \"1\"
    }
  },
  \"spec\": {
    \"rawYaml\": \"apiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRole\\nmetadata:\\n  name: privileged\\n  namespace: {{NAMESPACE}}\\nrules:\\n- apiGroups:\\n  - '*'\\n  resources:\\n  - '*'\\n  verbs:\\n  - '*'\\n- nonResourceURLs:\\n  - '*'\\n  verbs:\\n  - '*'\\n\"
  }
}
"""

['Template webhook when including Pod in ClusterTemplate should pass with warning even though invalid scope 1']
SnapShot = """
{
  \"kind\": \"ClusterTemplate\",
  \"apiVersion\": \"cosmo-workspace.github.io/v1alpha1\",
  \"metadata\": {
    \"name\": \"ns-level-ctmpl\",
    \"creationTimestamp\": null
  },
  \"spec\": {
    \"rawYaml\": \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: nginx\\n  namespace: {{NAMESPACE}}\\nspec:\\n  containers:\\n  - name: nginx\\n    image: nginx:alpine\\n\"
  }
}
"""

# Generated by cosmoctl template command
apiVersion: cosmo-workspace.github.io/v1alpha1
kind: ClusterTemplate
metadata:
  creationTimestamp: null
  labels:
    cosmo-workspace.github.io/type: useraddon
  name: fixed-efs-pv-useraddon
spec:
  requiredVars:
    - var: EFS_FILESYSTEM_ID
      default: fs-4af69aab
  rawYaml: |
    apiVersion: storage.k8s.io/v1
    kind: StorageClass
    metadata:
      labels:
        cosmo-workspace.github.io/instance: '{{INSTANCE}}'
        cosmo-workspace.github.io/template: '{{TEMPLATE}}'
      name: '{{INSTANCE}}-sc'
    provisioner: efs.csi.aws.com
    ---
    apiVersion: v1
    kind: PersistentVolume
    metadata:
      labels:
        cosmo-workspace.github.io/instance: '{{INSTANCE}}'
        cosmo-workspace.github.io/template: '{{TEMPLATE}}'
      name: '{{INSTANCE}}-pv'
    spec:
      accessModes:
      - ReadWriteMany
      capacity:
        storage: 5Gi
      csi:
        driver: efs.csi.aws.com
        volumeHandle: "{{EFS_FILESYSTEM_ID}}"
      persistentVolumeReclaimPolicy: Retain
      storageClassName: '{{INSTANCE}}-sc'
      volumeMode: Filesystem
    ---
    apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      labels:
        cosmo-workspace.github.io/instance: '{{INSTANCE}}'
        cosmo-workspace.github.io/template: '{{TEMPLATE}}'
      name: '{{INSTANCE}}-claim'
      namespace: '{{NAMESPACE}}'
    spec:
      accessModes:
      - ReadWriteMany
      resources:
        requests:
          storage: 5Gi
      storageClassName: '{{INSTANCE}}-sc'
